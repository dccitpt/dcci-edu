<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ êµìœ¡ì‹ ì²­</title>

    <meta property="og:type" content="website">
    <meta property="og:title" content="ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ êµìœ¡ì‹ ì²­ í™ˆí˜ì´ì§€">
    <meta property="og:description" content="ì‹¤ë¬´ì ì—­ëŸ‰ê°•í™”, ì¬ì§ì AI, FTA ì‹¤ë¬´ êµìœ¡ ë“± ë‹¤ì–‘í•œ ê³¼ì •ì„ í™•ì¸í•˜ê³  ì‹ ì²­í•˜ì„¸ìš”.">
    <meta property="og:image" content="https://dccitpt.github.io/dcci-edu/main.png">
    <meta property="og:url" content="https://dccitpt.github.io/dcci-edu/">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* í°íŠ¸ ì„¤ì • (Noto Sans KR) */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

        body,
        button,
        input,
        select,
        textarea {
            font-family: 'Noto Sans KR', sans-serif !important;
        }

        /* í˜ì´ì§€ ì „í™˜ìš© í´ë˜ìŠ¤ */
        .hidden-page {
            display: none;
        }

        /* ëª¨ë°”ì¼ í…Œì´ë¸” ì¢Œìš° ìŠ¤í¬ë¡¤ ë¶€ë“œëŸ½ê²Œ */
        .scrolling-touch {
            -webkit-overflow-scrolling: touch;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 sm:h-20 flex items-center justify-between">
            <div class="flex items-center cursor-pointer" onclick="showPage('main')">
                <img src="dcci_new_logo.png" alt="ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ ë¡œê³ " class="h-8 sm:h-10 mr-2 sm:mr-3 flex-shrink-0">
                <span class="text-lg sm:text-xl font-bold text-gray-800 tracking-tight whitespace-nowrap">êµìœ¡ì„¼í„°</span>
            </div>
            <div class="text-xs sm:text-sm text-gray-500 font-medium text-right break-keep">
                <span class="hidden sm:inline">ë¬¸ì˜: ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ </span>êµìœ¡ë‹´ë‹¹ì<br class="sm:hidden"> (053-222-3109)
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-10">

        <div id="page-main">

            <div class="w-full relative mb-12 rounded-xl overflow-hidden group cursor-pointer">
                <img src="main.png" alt="ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ êµìœ¡ì„¼í„° ë©”ì¸"
                    class="w-full h-auto object-contain transition-transform duration-500 group-hover:scale-105">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 mb-12 sm:mb-16 items-stretch">
                <div class="bg-white rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 cursor-pointer group flex flex-col h-full"
                    onclick="showPage('list-competency')">
                    <div
                        class="h-40 sm:h-48 bg-white flex items-center justify-center rounded-t-xl relative overflow-hidden flex-shrink-0">
                        <img src="business_skills_up.png" alt="ì‹¤ë¬´ì ì—­ëŸ‰ê°•í™” êµìœ¡" class="w-full h-full object-cover">
                    </div>
                    <div class="p-6 sm:p-8 text-center flex flex-col flex-grow relative">
                        <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2 tracking-tight mt-2 sm:mt-4">ì‹¤ë¬´ì
                            ì—­ëŸ‰ê°•í™” êµìœ¡</h3>
                        <p class="text-sm sm:text-base text-gray-500 mb-6 sm:mb-8 font-normal flex-grow">ì„¸ë¬´/íšŒê³„, ì¸ì‚¬/ë…¸ë¬´,
                            ê²½ì˜ì¼ë°˜ ë“±
                        </p>
                        <span
                            class="inline-block w-full px-4 py-3 bg-indigo-900 text-white rounded-lg font-bold hover:bg-indigo-800 transition-colors mt-auto">êµìœ¡ê³¼ì •ë³´ê¸°</span>
                    </div>
                </div>

                <div
                    class="bg-white rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 flex flex-col h-full">
                    <div
                        class="h-40 sm:h-48 bg-white flex items-center justify-center rounded-t-xl relative overflow-hidden flex-shrink-0">
                        <img src="https://dcci.korcham-workai.net/data/file/391e9504a389c63d608d22d9d5d52991.png"
                            alt="WORK.AI ë¡œê³ " class="w-full h-full object-cover">
                    </div>
                    <div class="p-6 sm:p-8 text-center flex flex-col flex-grow relative">
                        <div class="absolute top-4 right-4">
                            <span
                                class="bg-sky-500 text-white text-xs px-2 py-1 rounded font-bold shadow-sm">í™˜ê¸‰ê³¼ì •</span>
                        </div>
                        <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2 tracking-tight mt-2 sm:mt-4">ì¬ì§ì AI
                            êµìœ¡</h3>
                        <p class="text-sm sm:text-base text-gray-500 mb-6 sm:mb-8 font-normal flex-grow">ChatGPT, ì—…ë¬´ìë™í™”
                            ë“±</p>
                        <a href="https://dcci.korcham-workai.net/main/index.jsp" target="_blank"
                            class="inline-block w-full px-4 py-3 bg-sky-500 text-white rounded-lg font-bold hover:bg-sky-600 transition-colors mt-auto">WORK.AI
                            ì´ë™</a>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition-all duration-300 cursor-pointer group flex flex-col h-full"
                    onclick="showPage('list-fta')">
                    <div
                        class="h-40 sm:h-48 bg-white flex items-center justify-center rounded-t-xl relative overflow-hidden flex-shrink-0">
                        <img src="https://www.fta.go.kr/kr/images/daegu/logo_daegu_change.gif" alt="ëŒ€êµ¬ FTA í™œìš©ì§€ì›ì„¼í„° ë¡œê³ "
                            class="w-full h-full object-cover">
                    </div>
                    <div class="p-6 sm:p-8 text-center flex flex-col flex-grow relative">
                        <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2 tracking-tight mt-2 sm:mt-4">FTA ì‹¤ë¬´
                            êµìœ¡</h3>
                        <p class="text-sm sm:text-base text-gray-500 mb-6 sm:mb-8 font-normal flex-grow">ì›ì‚°ì§€ ê´€ë¦¬, í†µê´€ ì‹¤ë¬´
                        </p>
                        <span
                            class="inline-block w-full px-4 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors mt-auto">êµìœ¡ê³¼ì •ë³´ê¸°</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-8 min-h-[300px]">
                <h2 class="text-lg sm:text-xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center tracking-tight">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6 mr-2 text-blue-900" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    ì›”ë³„ ì£¼ìš” êµìœ¡ ì¼ì •
                </h2>
                <div class="overflow-x-auto relative scrolling-touch">
                    <table class="min-w-full divide-y divide-gray-200 whitespace-nowrap">
                        <thead class="bg-gray-50">
                            <tr>
                                <th
                                    class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                                    ì›”</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                                    ì¼ì</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                                    ê³¼ì •ëª…</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                                    ì¥ì†Œ</th>
                                <th
                                    class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider">
                                    ìƒíƒœ</th>
                            </tr>
                        </thead>
                        <tbody id="schedule-body" class="bg-white divide-y divide-gray-200 text-sm"></tbody>
                    </table>
                    <div id="loading-spinner" class="py-20 text-center w-full">
                        <svg class="animate-spin h-8 w-8 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg"
                            fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>
                        <p class="text-gray-500 font-medium">êµìœ¡ ì¼ì •ì„ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</p>
                    </div>
                </div>
                <p class="sm:hidden text-xs text-gray-400 mt-2 text-center">â†” ì¢Œìš°ë¡œ ë°€ì–´ì„œ ì¼ì •ì„ í™•ì¸í•˜ì„¸ìš”</p>
            </div>
        </div>

        <div id="page-list-competency" class="hidden-page">
            <div class="flex items-center mb-8"><button onclick="showPage('main')"
                    class="mr-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 font-medium">&larr;
                    í™ˆìœ¼ë¡œ</button>
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 tracking-tight">ğŸ“‚ ì‹¤ë¬´ì ì—­ëŸ‰ê°•í™” êµìœ¡</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
        <div id="page-list-fta" class="hidden-page">
            <div class="flex items-center mb-8"><button onclick="showPage('main')"
                    class="mr-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 font-medium">&larr;
                    í™ˆìœ¼ë¡œ</button>
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 tracking-tight">ğŸš¢ FTA ì‹¤ë¬´ êµìœ¡</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>

        <div id="page-detail" class="hidden-page">
            <div class="flex items-center mb-6"><button id="btn-back-list" onclick="showPage('main')"
                    class="mr-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 font-medium">&larr;
                    ëª©ë¡ìœ¼ë¡œ</button><span class="text-gray-500 text-sm font-medium">êµìœ¡ ìƒì„¸ ì •ë³´</span></div>
            <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
                <div class="bg-gray-800 px-6 py-6"><span id="detail-category"
                        class="text-blue-300 font-bold text-xs sm:text-sm tracking-wider uppercase mb-1 block">ì¹´í…Œê³ ë¦¬</span>
                    <h1 id="detail-title" class="text-2xl sm:text-3xl font-bold text-white tracking-tight break-keep">êµìœ¡
                        ì œëª©</h1>
                    <!-- ê³¼ì • IDë¥¼ ì €ì¥í•  íˆë“  í•„ë“œ -->
                    <input type="hidden" id="detail-id">
                </div>
                <div class="p-6 sm:p-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-4 border-l-4 border-blue-900 pl-3">êµìœ¡ ê°œìš”</h3>
                    <div class="bg-gray-50 rounded-lg p-4 sm:p-6 mb-10 text-sm">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">ì¼ì‹œ</span>
                                <span id="detail-date" class="font-medium text-gray-900"></span>
                            </div>
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">ì¥ì†Œ</span>
                                <span id="detail-place" class="font-medium text-gray-900"></span>
                            </div>
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">êµìœ¡ì¸ì›</span>
                                <span id="detail-capacity" class="font-medium text-blue-700"></span>
                            </div>
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">ì‹ ì²­ê¸°í•œ</span>
                                <span id="detail-deadline" class="font-medium text-gray-900"></span>
                            </div>
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">ëŒ€ìƒ</span>
                                <span id="detail-target" class="font-medium text-gray-900"></span>
                            </div>
                            <div class="flex items-start">
                                <span class="text-gray-500 w-20 flex-shrink-0 font-medium">ë¬¸ì˜</span>
                                <span id="detail-contact" class="font-medium text-gray-900"></span>
                            </div>
                        </div>
                    </div>

                    <div class="mb-10 space-y-8">
                        <div>
                            <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center"><span
                                    class="w-1.5 h-1.5 bg-blue-900 rounded-full mr-2"></span>êµìœ¡ ëª©í‘œ</h3>
                            <div id="detail-goal"
                                class="text-gray-700 bg-blue-50 border border-blue-100 p-4 rounded-lg leading-relaxed font-normal break-keep">
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center"><span
                                    class="w-1.5 h-1.5 bg-blue-900 rounded-full mr-2"></span>ê°•ì‚¬</h3>
                            <div id="detail-instructor" class="text-gray-900 font-medium pl-2"></div>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center"><span
                                    class="w-1.5 h-1.5 bg-blue-900 rounded-full mr-2"></span>ì£¼ìš” ë‚´ìš©</h3>
                            <div id="detail-content"
                                class="text-gray-700 border border-gray-200 p-6 rounded-lg whitespace-pre-line leading-loose font-normal break-keep">
                            </div>
                        </div>
                    </div>

                    <h3 class="text-lg font-bold text-gray-900 mb-4 border-l-4 border-blue-900 pl-3">êµìœ¡ë¹„ ë‚©ë¶€ ì•ˆë‚´</h3>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-10">
                        <p id="detail-payment-info"
                            class="text-sm text-yellow-900 whitespace-pre-line leading-relaxed font-medium"></p>
                    </div>

                    <h3 class="text-lg font-bold text-gray-900 mb-4 border-l-4 border-gray-500 pl-3">ê¸°íƒ€ ì•ˆë‚´ ì‚¬í•­</h3>
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mb-10">
                        <p id="detail-other-info"
                            class="text-sm text-gray-700 whitespace-pre-line leading-relaxed font-medium"></p>
                    </div>

                    <div class="text-center pt-6 border-t border-gray-100">
                        <button id="btn-apply" onclick="openModalFromDetail()"
                            class="w-full sm:w-auto px-10 py-4 bg-blue-900 text-white text-lg font-bold rounded-xl hover:bg-blue-800 shadow-lg transform hover:-translate-y-1 transition-all">ì‹ ì²­í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="applicationModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title"
        role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"
                onclick="closeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div
                class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-blue-900 px-4 py-3 sm:px-6 flex justify-between items-center">
                    <h3 class="text-lg leading-6 font-bold text-white">êµìœ¡ ì°¸ê°€ ì‹ ì²­</h3>
                    <button type="button" class="text-white hover:text-gray-200" onclick="closeModal()">âœ•</button>
                </div>
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <form id="applyForm">
                        <input type="hidden" id="modalCourseId">
                        <div class="space-y-4">
                            <div><label class="block text-sm font-bold text-gray-700">ì‹ ì²­ ê³¼ì •</label><input type="text"
                                    id="modalCourseTitle"
                                    class="mt-1 block w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 bg-gray-50 font-medium"
                                    readonly></div>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-sm font-bold text-gray-700">íšŒì‚¬ëª…</label><input type="text"
                                        id="bizName" required
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="ì˜ˆ: (ì£¼)ëŒ€êµ¬ìƒê³µíšŒì˜ì†Œ"></div>

                                <div><label class="block text-sm font-bold text-gray-700">ì‚¬ì—…ìë²ˆí˜¸</label><input
                                        type="text" id="bizNo" required maxlength="12" oninput="autoHyphen(this, 'biz')"
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="123-45-67890 (ìˆ«ìë§Œ)"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-sm font-bold text-gray-700">ë¶€ì„œ</label><input type="text"
                                        id="deptName" required
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="ì˜ˆ: ê¸°íší™ë³´íŒ€"></div>
                                <div><label class="block text-sm font-bold text-gray-700">ì§ìœ„</label><input type="text"
                                        id="position" required
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="ì˜ˆ: ê³¼ì¥"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label class="block text-sm font-bold text-gray-700">ì„±ëª…</label><input type="text"
                                        id="applicantName" required
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="ì˜ˆ: í™ê¸¸ë™"></div>

                                <div><label class="block text-sm font-bold text-gray-700">íœ´ëŒ€í°</label><input type="tel"
                                        id="phone" required maxlength="13" oninput="autoHyphen(this, 'phone')"
                                        class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                        placeholder="010-1234-5678 (ìˆ«ìë§Œ)"></div>
                            </div>
                            <div><label class="block text-sm font-bold text-gray-700">ì´ë©”ì¼</label><input type="email"
                                    id="email" required
                                    class="mt-1 w-full border border-gray-300 rounded-md py-2 px-3 focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="ì˜ˆ: user@example.com"></div>

                            <div class="flex items-start">
                                <div class="flex items-center h-5"><input id="privacy" type="checkbox" required
                                        class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"></div>
                                <div class="ml-3 text-sm">
                                    <label for="privacy" class="font-medium text-gray-700"><a href="privacy.html"
                                            target="_blank" class="text-blue-600 underline hover:text-blue-800">ê°œì¸ì •ë³´ ìˆ˜ì§‘
                                            ë° ì´ìš©</a>ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
                                    <p class="text-gray-500 text-xs mt-1">ìˆ˜ì§‘ëœ ì •ë³´ëŠ” êµìœ¡ ìš´ì˜ ë° ìˆ˜ë£Œì¦ ë°œê¸‰ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" onclick="submitForm()"
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-900 text-base font-bold text-white hover:bg-blue-800 sm:ml-3 sm:w-auto sm:text-sm shadow-md transition-all transform hover:-translate-y-0.5">ì‹ ì²­í•˜ê¸°</button>
                    <button type="button" onclick="closeModal()"
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =========================================================================
        // [Supabase ì„¤ì •]
        // =========================================================================
        const SUPABASE_URL = "https://lpriczrnijdjtveumnna.supabase.co";
        const SUPABASE_KEY = "sb_publishable_FbKcsZiMjakjpvYp528MnQ_opGqbmoI";
        // =========================================================================

        const supabase = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY) : null;
        let courseData = {};
        const loadingSpinner = document.getElementById('loading-spinner');
        const scheduleBody = document.getElementById('schedule-body');

        if (!supabase) {
            console.error("Supabase client not initialized.");
        }

        // [í•µì‹¬] ìë™ í•˜ì´í”ˆ ìƒì„± í•¨ìˆ˜ (í•˜ë‚˜ë¡œ í†µí•©)
        function autoHyphen(target, type) {
            let value = target.value.replace(/[^0-9]/g, ''); // ìˆ«ì ì´ì™¸ì˜ ë¬¸ì ì œê±°
            let result = '';

            if (type === 'biz') {
                if (value.length < 4) { result = value; }
                else if (value.length < 6) { result = value.substr(0, 3) + '-' + value.substr(3); }
                else if (value.length < 11) { result = value.substr(0, 3) + '-' + value.substr(3, 2) + '-' + value.substr(5); }
                else { result = value.substr(0, 3) + '-' + value.substr(3, 2) + '-' + value.substr(5); }
            } else if (type === 'phone') {
                if (value.length < 4) { result = value; }
                else if (value.length < 7) { result = value.substr(0, 3) + '-' + value.substr(3); }
                else if (value.length < 11) { result = value.substr(0, 3) + '-' + value.substr(3, 3) + '-' + value.substr(6); }
                else { result = value.substr(0, 3) + '-' + value.substr(3, 4) + '-' + value.substr(7); }
            }
            target.value = result;
        }

        document.addEventListener('DOMContentLoaded', () => {
            history.replaceState({ page: 'main' }, '', '');
            fetchCourses();
        });

        window.addEventListener('popstate', function (event) {
            const pageId = event.state && event.state.page ? event.state.page : 'main';
            showPage(pageId, false);
        });

        async function fetchCourses() {
            loadingSpinner.classList.remove('hidden');
            scheduleBody.innerHTML = '';

            // [ìˆ˜ì •] education_apply í…Œì´ë¸”ì€ ê´€ë¦¬ìë§Œ ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ(RLS), join ì‹œ ê¶Œí•œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.
            // ë”°ë¼ì„œ ìµëª… ì‚¬ìš©ìë„ ë³¼ ìˆ˜ ìˆëŠ” courses í…Œì´ë¸”ë§Œ ë‹¨ìˆœ ì¡°íšŒí•©ë‹ˆë‹¤.
            const { data, error } = await supabase
                .from('courses')
                .select('*');

            if (error) {
                console.error("Error:", error);
                loadingSpinner.innerHTML = `<p class="text-red-500 font-bold">ì˜¤ë¥˜: ${error.message}</p>`;
                return;
            }

            // Client-side sorting
            const sortedArray = data.map(item => {
                // ì‹ ì²­ì ìˆ˜ëŠ” ë³„ë„ ë³´ì•ˆ ì„¤ì • ì—†ì´ëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ 0ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                return { ...item, current: 0 };
            }).sort((a, b) => {
                const parseDate = (str) => {
                    try {
                        const parts = str.match(/(\d{4})\.\s*(\d{1,2})\.\s*(\d{1,2})/);
                        if (parts) return new Date(`${parts[1]}-${parts[2]}-${parts[3]}`);
                        return new Date(9999, 11, 31);
                    } catch (e) { return new Date(9999, 11, 31); }
                };
                return parseDate(a.date) - parseDate(b.date);
            });

            courseData = {};
            sortedArray.forEach(item => {
                courseData[item.id] = item;
            });

            renderLists();
            renderSchedule();
            loadingSpinner.classList.add('hidden');
        }

        function renderLists() {
            const compList = document.querySelector('#page-list-competency .grid');
            const ftaList = document.querySelector('#page-list-fta .grid');
            compList.innerHTML = ''; ftaList.innerHTML = '';

            let hasComp = false;
            let hasFta = false;

            Object.keys(courseData).forEach(id => {
                const item = courseData[id];

                // ì¹´ë“œì— ë©”ì¸ ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ê¸°ë³¸ ì´ë¯¸ì§€ ì‚¬ìš©, ìˆë‹¤ë©´ êµì²´ ê°€ëŠ¥
                const cardHTML = `
                    <div class="bg-white rounded-xl shadow border border-gray-100 flex flex-col h-full hover:shadow-2xl transition-all duration-300">
                        <div class="bg-gray-50 px-6 py-4 border-b border-gray-100 flex-none">
                            <span class="text-xs font-bold text-gray-800">${item.category}</span>
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-bold text-gray-900 mb-2 tracking-tight break-keep">${item.title}</h3>
                            <p class="text-gray-500 text-sm font-semibold text-blue-900">${item.date}</p>
                            <p class="text-gray-500 text-sm mb-6 mt-1 flex items-start font-medium">
                                <svg class="w-4 h-4 mr-1 text-gray-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                <span class="break-keep">${item.place}</span>
                            </p>
                            <button onclick="loadDetail('${id}')" class="mt-auto w-full py-2 border border-blue-600 text-blue-600 rounded-lg font-bold hover:bg-blue-50 transition-colors">ìƒì„¸ë³´ê¸° &rarr;</button>
                        </div>
                    </div>`;

                if (item.category.includes('FTA')) {
                    ftaList.innerHTML += cardHTML;
                    hasFta = true;
                } else {
                    compList.innerHTML += cardHTML;
                    hasComp = true;
                }
            });

            const emptyMsg = `<div class="col-span-1 md:col-span-2 lg:col-span-3 text-center py-20 text-gray-400 font-medium">í˜„ì¬ ì¤€ë¹„ëœ êµìœ¡ ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì¶”í›„ ì¼ì •ì´ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì…ë‹ˆë‹¤.</div>`;

            if (!hasComp) compList.innerHTML = emptyMsg;
            if (!hasFta) ftaList.innerHTML = emptyMsg;
        }

        function renderSchedule() {
            scheduleBody.innerHTML = '';
            const now = new Date();

            Object.keys(courseData).forEach(id => {
                const item = courseData[id];
                let month = "ì¼ì •";
                let dateOnly = item.date;

                if (item.date.includes('.')) {
                    const parts = item.date.split('.');
                    if (parts.length >= 3) {
                        month = parts[1].trim() + "ì›”";
                        const dayPart = parts[2].split('(')[0].trim();
                        dateOnly = `${parts[0]}. ${parts[1]}. ${dayPart}`;
                    }
                }
                else if (item.date.includes('ì›”')) {
                    const match = item.date.match(/(\d+)ì›”/);
                    if (match) month = match[1] + "ì›”";
                    dateOnly = item.date.split('~')[0];
                }

                let statusBadge = `<span class="px-2 bg-green-100 text-green-800 text-xs font-bold rounded-full">ì ‘ìˆ˜ì¤‘</span>`;
                const cap = parseInt(item.capacity || 0);
                const cur = parseInt(item.current || 0);
                let isFull = false;

                if (cap > 0 && cur >= cap) { isFull = true; statusBadge = `<span class="px-2 bg-gray-200 text-gray-500 text-xs font-bold rounded-full">ì‹ ì²­ë§ˆê°</span>`; }
                if (!isFull && item.deadline) {
                    const deadlineDate = new Date(item.deadline);
                    deadlineDate.setHours(23, 59, 59, 999);
                    if (now > deadlineDate) { statusBadge = `<span class="px-2 bg-gray-200 text-gray-500 text-xs font-bold rounded-full">ì‹ ì²­ë§ˆê°</span>`; }
                }

                const tr = `
                    <tr class="hover:bg-gray-50 cursor-pointer transition-colors" onclick="loadDetail('${id}')">
                        <td class="px-4 py-3 font-bold text-gray-900 whitespace-nowrap">${month}</td>
                        <td class="px-4 py-3 text-gray-500 whitespace-nowrap font-medium">${dateOnly}</td>
                        <td class="px-4 py-3 text-gray-900 font-bold whitespace-nowrap">${item.title}</td>
                        <td class="px-4 py-3 text-gray-500 text-xs whitespace-nowrap">${item.place}</td>
                        <td class="px-4 py-3 whitespace-nowrap">${statusBadge}</td>
                    </tr>`;
                scheduleBody.innerHTML += tr;
            });
        }

        function showPage(pageId, addToHistory = true) {
            document.querySelectorAll('main > div').forEach(div => div.classList.add('hidden-page'));
            document.getElementById('page-' + pageId).classList.remove('hidden-page');
            window.scrollTo(0, 0);
            if (addToHistory) history.pushState({ page: pageId }, '', '');
        }

        function loadDetail(courseId) {
            const data = courseData[courseId];
            if (!data) return alert('ì •ë³´ ì—†ìŒ');

            document.getElementById('detail-id').value = courseId; // ID ì €ì¥
            document.getElementById('detail-category').innerText = data.category;
            document.getElementById('detail-title').innerText = data.title;
            document.getElementById('detail-date').innerText = data.date;
            document.getElementById('detail-place').innerText = data.place;
            document.getElementById('detail-target').innerText = data.target;
            document.getElementById('detail-goal').innerText = data.goal;
            document.getElementById('detail-instructor').innerText = data.instructor;
            document.getElementById('detail-content').innerText = data.content;
            document.getElementById('detail-payment-info').innerText = data.payment_info || "ë¬´ë£Œ / ë³„ë„ ë¬¸ì˜";

            const capacityEl = document.getElementById('detail-capacity');
            const cap = parseInt(data.capacity || 0);
            const cur = parseInt(data.current || 0);

            if (cap > 0) { capacityEl.innerText = `ì‹ ì²­ ${cur}ëª… / ì •ì› ${cap}ëª…`; } else { capacityEl.innerText = "ì œí•œ ì—†ìŒ"; }

            let formattedDeadline = "ë³„ë„ ê³µì§€";
            if (data.deadline) {
                const dateObj = new Date(data.deadline);
                if (!isNaN(dateObj)) {
                    const year = dateObj.getFullYear();
                    const month = dateObj.getMonth() + 1;
                    const day = dateObj.getDate();
                    const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                    const dayName = dayNames[dateObj.getDay()];
                    formattedDeadline = `${year}. ${month}. ${day}(${dayName})`;
                } else { formattedDeadline = data.deadline; }
            }
            document.getElementById('detail-deadline').innerText = formattedDeadline;
            document.getElementById('detail-other-info').innerText = data.other_info || "ì—†ìŒ";
            document.getElementById('detail-contact').innerText = data.contact || "ê¸°ì—…ì§€ì›ë¶€ í†µìƒì§„í¥íŒ€ (053-222-3109)";

            const btnApply = document.getElementById('btn-apply');
            btnApply.disabled = false;
            btnApply.innerText = "ì‹ ì²­í•˜ê¸°";
            btnApply.classList.remove('bg-gray-400', 'cursor-not-allowed');
            btnApply.classList.add('bg-blue-900', 'hover:bg-blue-800', 'shadow-lg');
            btnApply.onclick = openModalFromDetail;

            if (data.deadline) {
                const deadlineDate = new Date(data.deadline);
                deadlineDate.setHours(23, 59, 59, 999);
                const now = new Date();
                if (now > deadlineDate) { disableButton(btnApply, "ì‹ ì²­ ë§ˆê° (ê¸°í•œ ê²½ê³¼)"); }
            }
            if (cap > 0 && cur >= cap) { disableButton(btnApply, "ì‹ ì²­ ë§ˆê° (ì •ì› ì´ˆê³¼)"); }

            const prevPage = data.category.includes('FTA') ? 'list-fta' : 'list-competency';
            document.getElementById('btn-back-list').setAttribute('onclick', `showPage('${prevPage}')`);

            showPage('detail');
        }

        function disableButton(btn, text) {
            btn.disabled = true;
            btn.innerText = text;
            btn.classList.remove('bg-blue-900', 'hover:bg-blue-800', 'shadow-lg');
            btn.classList.add('bg-gray-400', 'cursor-not-allowed');
            btn.onclick = null;
        }

        function openModalFromDetail() {
            const courseTitle = document.getElementById('detail-title').innerText;
            const courseId = document.getElementById('detail-id').value;
            document.getElementById('modalCourseTitle').value = courseTitle;
            document.getElementById('modalCourseId').value = courseId;
            document.getElementById('applicationModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('applicationModal').classList.add('hidden');
            document.getElementById('applyForm').reset();
        }

        async function submitForm() {
            const form = document.getElementById('applyForm');
            if (!form.checkValidity()) { form.reportValidity(); return; }

            const btn = document.querySelector('button[onclick="submitForm()"]');
            const originalText = btn.innerText;
            btn.innerText = "ì ‘ìˆ˜ ì¤‘...";
            btn.disabled = true;

            // [ìˆ˜ì •] education_apply í…Œì´ë¸” ìŠ¤í‚¤ë§ˆì— ë§ì¶° í•„ë“œëª… ë§¤í•‘
            const applicantData = {
                course_id: document.getElementById('modalCourseId').value,
                company: document.getElementById('bizName').value,    // bizName -> company
                biz_no: document.getElementById('bizNo').value,       // (ì¶”ê°€)
                dept: document.getElementById('deptName').value,      // (ì¶”ê°€)
                position: document.getElementById('position').value,
                name: document.getElementById('applicantName').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                agree_privacy: document.getElementById('privacy').checked
            };

            const { error } = await supabase.from('education_apply').insert([applicantData]);

            if (error) {
                alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                btn.innerText = originalText;
                btn.disabled = false;
            } else {
                alert(`[ì‹ ì²­ ì™„ë£Œ]\nì •ìƒì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\në‹´ë‹¹ìê°€ í™•ì¸ í›„ ë¬¸ìë¡œ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.`);
                closeModal();
                fetchCourses(); // ê°±ì‹ 
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }
    </script>
</body>

</html>